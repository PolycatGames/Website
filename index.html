<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="fonts.css" />
  <link rel="stylesheet" href="background.css">
  <link rel="icon" href="/files/images/favicon.png">

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

  <script src="scroll.js"></script>
  <script src="models.js"></script>
  <script>
    const version = 5;
  </script>
  <script>
    function loadUpdatedStylesheet() {
      // Replace this constant with the desired commit hash
      const latestCommit = version; // Set to a specific commit hash

      var links = document.querySelectorAll('link[rel="stylesheet"]');
      var preloadPromises = [];

      for (var i = 0; i < links.length; i++) {
        var link = links[i];
        var href = link.getAttribute('href');

        if (href) {
          var updatedHref = href + '?v=' + latestCommit;
          var preloadPromise = new Promise((resolve, reject) => {
            var preloadLink = document.createElement('link');
            preloadLink.setAttribute('rel', 'preload');
            preloadLink.setAttribute('as', 'style');
            preloadLink.setAttribute('href', updatedHref);
            preloadLink.addEventListener('load', resolve);
            preloadLink.addEventListener('error', reject);
            document.head.appendChild(preloadLink);
          });

          preloadPromises.push(preloadPromise);
        }
      }

      Promise.all(preloadPromises)
        .then(() => {
          for (var i = 0; i < links.length; i++) {
            var link = links[i];
            var href = link.getAttribute('href');

            if (href) {
              var updatedHref = href + '?v=' + latestCommit;
              var newLink = document.createElement('link');
              newLink.setAttribute('rel', 'stylesheet');
              newLink.setAttribute('href', updatedHref);
              document.head.appendChild(newLink);
              link.parentNode.removeChild(link);
            }
          }
          // All stylesheets have been loaded, remove the default stylesheet
          var defaultStylesheet = document.querySelector('link[href="default.css"]');
        })
        .catch(error => console.log(error));
    }

    loadUpdatedStylesheet();
  </script>

  <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.1.1/model-viewer.min.js"></script>
  <script async src="https://ga.jspm.io/npm:es-module-shims@1.7.1/dist/es-module-shims.js"></script>
  <script type="importmap">
     {
       "imports": {
         "three": "https://cdn.jsdelivr.net/npm/three@^0.156.1/build/three.module.min.js"
       }
     }
  </script>
  <script type="module"
    src="https://cdn.jsdelivr.net/npm/@google/model-viewer/dist/model-viewer-module.min.js"></script>
  <script type="module"
    src="https://cdn.jsdelivr.net/npm/@google/model-viewer-effects/dist/model-viewer-effects.min.js"></script>

  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
    rel="stylesheet" />
  <title>Project Betelgeuze</title>
</head>

<body>

  <div class="cover"></div>
  <div class="mist"></div>

  <main>
    <article class="landing-page">
      <div class="landing center standard-margin">
        <span class="title">Profielwerkstuk</span>
        <h1 class="title">Betelgeuze</h1>
        <div></div>
      </div>
    </article>

    <script>
      window.addEventListener('scroll', function () {
        var scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        var maxScroll = 500; // The scroll distance at which the element is fully transparent
        var opacity = 1 - (scrollTop / maxScroll);
        opacity = Math.max(opacity, 0); // Ensure opacity doesn't go below 0

        var element = document.querySelector('.landing');
        element.style.opacity = opacity;
      });
    </script>


    <img class="landing-img" src="/files/images/betelgeuze-alpha-1500x.webp" alt="Betelgeuze ster" />

    <article>
      <div class="left-holder standard-margin scroll-animation">
        <div class="landing-info">
          <p><b>Massa:</b> ~11 zonmassa's</p>
          <p><b>Temperatuur:</b> ~3500K</p>
          <p><b>Afstand tot aarde:</b> 642,5 lichtjaar</p>
          <p><b>Diameter:</b> 1180x groter dan de zon</p>
          <div></div>
        </div>
      </div>
      <div class="authors-section standard-margin">
        <h2 class="title scroll-animation">Gemaakt door</h2>
        <div class="authors scroll-animation">
          <div class="author">
            <h3 class="title">Sjoerd Visser</h3>
            <ul>
              <li>Website ontwerpen en programmeren</li>
              <li>3D modellen ontwerpen</li>
              <li>Voorspellings-algoritme programmeren</li>
            </ul>
          </div>
          <div class="author">
            <h3 class="title">Rens de Waard</h3>
            <ul>
              <li>Magnitude van Betelgeuze meten met amateurs-telescoop</li>
              <li>Onderzoek doen naar de toekomst van de ster Betelgeuze</li>
              <li>Spectroscopische metingen maken</li>
            </ul>

          </div>
        </div>
      </div>
    </article>
    <article class="standard-margin">
      <div class="items">
        <div class="item scroll-animation">
          <div>
            <h3 class="title">De Telescoop</h3>
            <p>Voor dit onderzoek hebben we gebruik gemaakt van een amateur astronomische opstelling. Alhoewel vaak
              gebruikt om de prachtige nevels te verkennen van de Melkweg is het tijdelijk omgezet in een onderzoek bron
              voor Betelgeuze. We hebben gebruik gemaakt van een Skywatcher EQ-6R PRO SynScan Heavy Duty Computerised
              Go-To Mount montering, Redcat 51 telescoop van William Optics. En een Nikon d5300 camera van Nikon. Een
              opstelling om ons diep in te laten duiken op de geheimen die Betelgeuze met zich meebrengt.</p>
          </div>
          <model-viewer class="main-model" src="files/models/telescope.glb" alt="Telescoop 3D model" auto-rotate
            camera-controls disable-zoom disable-pan id="model">
          </model-viewer>
        </div>
      </div>
      <div class="item scroll-animation" id="item-oposite">
        <model-viewer class="main-model" src="files/models/spectrometer.glb" alt="Spectrometer 3D model" auto-rotate
          camera-controls disable-zoom disable-pan id="model">
        </model-viewer>
        <div>
          <h3 class="title">De Spectrometer</h3>
          <p>De spectroscoop is een stukje improvisatie. Gemaakt door een VOS Instrumenten handspectroscoop te verbinden
            met een C505 HD webcam. En alhoewel het heel experimenteel is, heeft het al prachtig kleuren kunnen afbreken
            en met behulp van programma&apos;s kunnen omzetten in een elektromagnetisch spectrum.</p>
        </div>
      </div>
      </div>
    </article>

    <article class="simulation">
      <div class="scroll-animation prediction-model-section standard-margin">
        <h2 class="title">Voorspellingsmodel</h2>
      </div>
      <div class="scroll-animation">
        <div id="slider-container">
          <img src="" alt="Image Sequence" id="image-sequence">
          <input type="range" min="1" max="230" value="1" id="slider">
          <p>(Sleep het rode balletje om het voorspellingsmodel af te spelen)</p>
        </div>

        <script>
          // Get the slider and image elements
          var slider = document.getElementById("slider");
          var image = document.getElementById("image-sequence");

          // Function to update the image source based on slider value
          function updateImage() {
            var value = parseInt(slider.value);
            // Adjust the path and naming of your image sequence accordingly
            image.src = "/files/simulation/Sequence 0" + (value + 1000).toString() + ".png";
          }

          // Add event listener to slider
          slider.addEventListener("input", updateImage);

          // Call the function initially to set the initial image
          updateImage();
        </script>
      </div>
    </article>
  </main>
</body>

</html>